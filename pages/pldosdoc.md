---
layout: page-fullwidth
title: "The pldos tool"
permalink: "/docs/misc/pldos/"
header: no
---
_____________________________________________________________


### _Purpose_
{:.no_toc}

**pldos**{: style="color: blue"} is designed to generate data to make figures of partial densities-of-states (DOS).

It can make postscript files directly, but this tool is is mostly used to set up render data files generated by
Questaal codes into a simple, [easy-to-read format](/docs/misc/fplot/#structure-of-data-files). 
**pldos**{: style="color: blue"} also makes a script for the [**fplot**{: style="color: blue"}](/docs/misc/fplot/) graphics tool,
but the simple data format is suitable for use by any graphics package.

_____________________________________________________________

### _Preliminaries_
{:.no_toc}

Executables **pldos**{: style="color: blue"} and **fplot**{: style="color: blue"}, are required and are assumed to be in your path. 
You will also need a postscript viewer.  This document assumes you are using the apple-style **open**{: style="color: blue"} command to view postscript files.


### _Table of Contents_
{:.no_toc}
*  Auto generated table of contents
{:toc}


_____________________________________________________________

### 1. _Introduction_
_____________________________________________________________

Densities-of-states (DOS) tell us a great deal about the electronic structure of a system.
Many programs in the Questaal suite make DOS for noninteracting hamiltonians, e.g.
**lm**{: style="color: blue"},&nbsp; **lmf**{: style="color: blue"},&nbsp; and **tbe**{: style="color: blue"}.
These packages write DOS information directly, to file _dos.ext_{: style="color: green"}, or create band weights to enable
the postprocessing tool **lmdos**{: style="color: blue"} to decompose the DOS into partial contributions.
The Green's function codes **lmgf**{: style="color: blue"} and **lmpg**{: style="color: blue"} can also make DOS or partial DOS
by integrating the imaginary part of _G_ over the Brillouin zone for a particular energy, and rastering over energies.
See [here](/docs/code/cpadoc/#partial-densities-of-states) for a brief description to make the partial DOS, written in the
same format as **lmdos**{: style="color: blue"} or **lmf**{: style="color: blue"}.

Some codes make DOS, or spectral functions, for hamiltonians in which the Green's function does not consist of a collection of sharp poles
at the quasiparticle levels.  Poles can be broadened by interactions, which at the one-particle level gives rise to a frequency-dependent,
complex self-energy &Sigma;(<b>k</b>,<i>&omega;</i>).

The _GW_ approximation makes such a &Sigma;; this [_GW_ tutorial](/tutorial/gw/gw_self_energy/)
gives a little bit of [theory](/tutorial/gw/gw_self_energy/#theory) explaining how the Green's function is modified by interactions.
It also presents a tutorial to calculate and analyze &Sigma;(<b>k</b>,<i>&omega;</i>) in Fe.

[Dynamical Mean Field theory](docs/code/dmftoverview/") makes a _k_-independent (single-site) &Sigma;(<i>&omega;</i>), but the
&Sigma;(<i>&omega;</i>) it does make includes all local diagrams.  [This tutorial](/tutorial/qsgw_dmft/dmft0/) explains how to carry out a
DMFT calculation.  One complication is that DMFT calculations are carried out on the Matsubara axis.

The [Coherent Potential Approximation](/docs/code/cpadoc/), or CPA, which replaces disorder by an effective single site self-energy
&Sigma;(<i>&omega;</i>).  Even though the hamiltonian is non-interacting, disorder gives rise to a complex, frequency-dependent &Sigma;,
similar to the DMFT form. [This document](/docs/code/spectral-functions/) explains how to compute spectral functions for disordered systems 
(either chemical disorder or spin disorder) using the **lmgf**{: style="color: blue"} code.

**pldos**{: style="color: blue"} is designed only to analyze files witten in the format **lmf**{: style="color: blue"} or **lmdos**{: style="color: blue"} use.
It will provide a synopsis of its usage by typing:

    $ pldos --h

### 2. _Examples_
_____________________________________________________________

... to be completed	    

### 3. _pldos manual_
_____________________________________________________________


Invoke **pldos**{: style="color: blue"} in one of the following ways:
<pre>
pldos [-switches] <i>filename</i>
pldos -lst=... [-switches] <i>filename</i>
echo <i>dmax</i>, <i>h</i>, <i>emin</i>, <i>emax</i> | pldos -lst=... [-switches] <i>filename</i>
</pre>

_filename_{: style="color: green"} is the name of the DOS file generated by the Questaal package, e.g. _dos.ext_{: style="color: green"}.
This may be the total DOS generated by a band code such as **lmf**{: style="color: blue"} or the partial DOS
generated by **lmdos**{: style="color: blue"}.  In the magnetic case, or when partial DOS are generated, _dos.ext_{: style="color: green"}
will contain multiple families of DOS corresponding to different channels, e.g. partial waves _s_,&nbsp;_p_,&nbsp;_d_.

{::nomarkdown} <a name="dos-list"></a> {:/}
{::comment}
/docs/misc/pldos/#dos-list
{:/comment}


**pldos**{: style="color: blue"} will cull DOS from _dos.ext_{: style="color: green"}, and combine them according to lists you supply.
When multiple DOS are involved, refer to which member by an integer, e.g. 1 for the first DOS, 2 for the second, etc.

{::nomarkdown} <a name="spin-note"></a> {:/}
{::comment}
/docs/misc/pldos/#spin-note
{:/comment}

_Note:_{: style="color: red"} In the magnetic case the spin-up and spin-down DOS are interleaved; thus 1,3,5,&hellip; correspond to the spin-1 DOS
and 2,4,6,&hellip; correspond to the same channels, for spin 2.


In the first form (without the **\-\-lst=** switch) you will be prompted with a pair of questions:

~~~
 dos 1:  Enter list of dos to be added:
 Weights for dos: 1?
~~~

To the first question enter an integer corresponding to which DOS to extract from _dos.ext_{: style="color: green"}, or [a list of integers](/docs/misc/integerlists/).\\
To the second question enter a corresponding list of weights to assign each DOS.

These questions will be repeated until you enter a blank list in response to the first question.
Each group of DOS will generate a new panel; thus multiple panels can be drawn, one below the other.

These interactive questions can be bypassed with the &nbsp;**\-\-lst=**&nbsp; switch.  Create a sequence of one or more lists 
_list1_, &nbsp; _list2_, &nbsp; &hellip; using `--lst=list1;list2;...`.
Each of _list1_, &nbsp; _list2_, &nbsp; &hellip; consist of a [list of DOS](/docs/misc/pldos/#dos-list).
For each list a new panel will be made.

After the lists are read from standard input (**stdin**) or parsed from **\-\-lst=**, **pldos**{: style="color: blue"} reads four numbers from **stdin**: `dmax, height, emin, emax` :

+ **dmax** caps the DOS in the figure so as not to exceed this value
+ **height** is of dmax (ordinate), in cm.
+ **emin** and **emax** comprise the lower and upper energies of the figure (the energy appears on the abscissa).

#### Command line switches

Optional switches perform the following functions:

+ **-lst2\|-lst2=list...***\\
  performs the same function as **-lst** but for second spin.\\
  **-lst2** without arguments means to ust use arguments of **-lst**, but incrementing each element by 1 (see [_Note_{: style="color: red"}](/docs/misc/pldos/#spin-note)).

+ **-fplot**\\
  causes **pldos**{: style="color: blue"} to create input for **fplot**{: style="color: blue"} or another graphics package.  It does the following:\\
  1. writes collated dos to file _dosp.dat_{: style="color: green"}
  2. generates a script _plot.dos_{: style="color: green"}
  3. suppresses creating a postscript file directly

<i> </i>

+ **-long** \\
  writes fplot _dosp.dat_{: style="color: green"} with 6 decimals, rather than 4.

+ **-inc:_filname_**\\
  prepends contents of **_filname_** to fplot script file.

+ **-ref:fn=filename[:chan=ref-channel]** \\
  single DOS with color weights.
  + Reference DOS is total DOS file, standard format
  + filename is partial DOS file, standard format, e.g.\\
    **pldos -ef=0 -escl=13.6 -fplot '-lst=3;1' -ref:fn=dos.cr:scale dosl.cr**

<i> </i>

+ **-dif:#[,rat]] &nbsp;\|&nbsp; -int**\\
  differentiate or integrate DOS

+ **-ext=_ext_**\\
  substitute **dat** extension in fplot data files with **_ext_**.

+ **-ef=_expr_||-shiftef=_expr_**\\
  shift Fermi level to &nbsp;**_expr_**.

+ **-shiftef=_expr_**\\
  shift Fermi level by &nbsp;**_expr_**.

+ **-escl=_expr_** \\
  scale energy axis (abscissa) by &nbsp;**_expr_**

+ **-esclxy=_expr_**\\
  scale energy axis (abscissa) by &nbsp;**_expr_** and DOS (ordinate) by &nbsp;**1/_expr_**\\
  This is the appropriate switch to keep units consistent.

_____________________________________________________________

### 4. _Other resources_

See the documentation for [fplot](/plbnds/) and [plbnds](/plbnds/).
