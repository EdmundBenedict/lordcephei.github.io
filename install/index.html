<!doctype html> <html class="no-js" lang="en"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <title>LM Suite - Installation</title> <link rel="stylesheet" href="https://lordcephei.github.io/assets/css/styles_feeling_responsive.css"> <script src="https://lordcephei.github.io/assets/js/modernizr.min.js"></script> <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script> <script> WebFont.load({ google: { families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ] } }); </script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> <noscript> <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic|Volkhov' rel='stylesheet' type='text/css'> </noscript> <meta name="google-site-verification" content="KBbEPlf44q4dfL6SBHqymelMqXBSuZHSXIo-ZfkQLbE" /> <meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" /> <meta name="description" content=""/> <link rel="author" href="https://plus.google.com/u/0/104386739373934968982"/> <link rel="icon" sizes="32x32" href="https://lordcephei.github.io/assets/img/favicon-32x32.png"> <link rel="icon" sizes="192x192" href="https://lordcephei.github.io/assets/img/touch-icon-192x192.png"> <link rel="apple-touch-icon-precomposed" sizes="180x180" href="https://lordcephei.github.io/assets/img/apple-touch-icon-180x180-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://lordcephei.github.io/assets/img/apple-touch-icon-152x152-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://lordcephei.github.io/assets/img/apple-touch-icon-144x144-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://lordcephei.github.io/assets/img/apple-touch-icon-120x120-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://lordcephei.github.io/assets/img/apple-touch-icon-114x114-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://lordcephei.github.io/assets/img/apple-touch-icon-76x76-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://lordcephei.github.io/assets/img/apple-touch-icon-72x72-precomposed.png"> <link rel="apple-touch-icon-precomposed" href="https://lordcephei.github.io/assets/img/apple-touch-icon-precomposed.png"> <meta name="msapplication-TileImage" content="https://lordcephei.github.io/assets/img/msapplication_tileimage.png"/> <meta name="msapplication-TileColor" content="#fabb00"> <!-- Facebook Optimization --> <meta property="og:locale" content="en_EN" /> <meta property="og:type" content="website" /> <meta property="og:title" content="LM Suite - Installation" /> <meta property="og:description" content="»LM Suite« is a program for for LMTO and GW simulations."/> <meta property="og:url" content="https://lordcephei.github.io//install/" /> <meta property="og:site_name" content="LM Suite" /> <!-- Search Engine Optimization --> <link type="text/plain" rel="author" href="https://lordcephei.github.io/humans.txt" /> <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script> <style type="text/css"> red { color:purple; /*This changes the color of your text */ font-size:24pt; /*This changes the font size of your text */ } </style> </head> <body id="top-of-page" class="page-fullwidth"> <div id="navigation" class="sticky"> <nav class="top-bar" data-topbar> <ul class="title-area"> <li class="name"> <h1 class="show-for-small-only"><a href="https://lordcephei.github.io" class="icon-tree"> LM Suite</a></h1> </li> <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone --> <li class="toggle-topbar menu-icon"><a href="#"><span>Navigation</span></a></li> </ul> <section class="top-bar-section"> <ul class="right"> <script language="Javascript" type="text/javascript"> function google_search() { var query = document.getElementById("google-search").value; window.open("http://google.com/search?q=" + query + "%20site:" + "https://lordcephei.github.io"); } </script> <li class="divider"></li> <li style="background:#FFFFFF"> <form style="width:200px" onsubmit="google_search()" > <input type="text" id="google-search" placeholder="Enter search term and hit enter"> </form> </li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/contact/">Contact</a></li> </ul> <ul class="left"> <li><a href="https://lordcephei.github.io/">Start</a></li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/blog/">News and Updates</a></li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/developers/">Developers</a></li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://lordcephei.github.io/docs/">Documentation</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/insert/">Package Overview</a></li> <li><a href="https://lordcephei.github.io/install/">Installation</a></li> <li><a href="https://lordcephei.github.io/fplmtoverview/">FP Overview</a></li> <li><a href="https://lordcephei.github.io/fpcapabilities/">FP Capabilities</a></li> <li><a href="https://lordcephei.github.io/inputguide/">The Input File</a></li> <li><a href="https://lordcephei.github.io/opticsdoc/">Optics</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://lordcephei.github.io">Tutorials</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/lmtut/">Basic GW Tutorial</a></li> <li><a href="https://lordcephei.github.io/asadoc/">ASA tutorial</a></li> <li><a href="https://lordcephei.github.io/buildingfpinput/">Building the FP Input File</a></li> <li><a href="https://lordcephei.github.io/fpnew/">Tutorial for the full-potential LDA program lmf</a></li> <li><a href="https://lordcephei.github.io/fpoptbas/">FP basis optimisation</a></li> <li><a href="https://lordcephei.github.io/extbfield/">Adding external Zeeman field to the potential</a></li> <li><a href="https://lordcephei.github.io/fstut/">Generating a Fermi surface in spin polarized Fe</a></li> </ul> </li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/formatting/">Site Contribution</a></li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/about/">About</a></li> <li class="divider"></li> </ul> </section> </nav> </div><!-- /#navigation --> <div id="masthead"> <div class="row"> <div class="small-12 columns"> <a id="logo" href="https://lordcephei.github.io" title="LM Suite – Simulating the world one bit at a time."> <img src="https://lordcephei.github.io/assets/img/logo3.png" alt="LM Suite – Simulating the world one bit at a time."> </a> </div><!-- /.small-12.columns --> </div><!-- /.row --> </div><!-- /#masthead --> <div class="row t30"> <div class="medium-12 columns"> <article> <header> <p class="subheadline"></p> <h1>LM Suite - Installation</h1> </header> <p class="teaser"> </p> <h3 id="table-of-contents">Table of Contents</h3> <ul id="markdown-toc"> <li><a href="#table-of-contents" id="markdown-toc-table-of-contents">Table of Contents</a></li> <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a></li> <li><a href="#installation-procedure" id="markdown-toc-installation-procedure">Installation Procedure</a></li> <li><a href="#notes" id="markdown-toc-notes">Notes</a></li> <li><a href="#known-problems-and-bugs" id="markdown-toc-known-problems-and-bugs">Known problems and bugs</a></li> </ul> <h2 id="prerequisites">Prerequisites</h2> <ul> <li>Modern C and Fortran compilers (GCC v4.7+ and Intel v11.1+ are known to work).</li> <li>BLAS, LAPACK and fftw3 libraries.</li> <li>Python v2.5+ (2.4 might work too but is not tested)</li> <li>Scons v2.2+ (a local version is included if this is not available on the system)</li> </ul> <p>MPI, BLACS, SCALAPACK etc.. are optional.</p> <p>Since v7.10d libxc (v2.2+) is also a requirement. If the env variable LIBXCPATH is set to the libxc installation path everything will likely work fine. One may also specify the library and the include path manually in the flags.mk file</p> <h2 id="installation-procedure">Installation Procedure</h2> <p>First of all, clone the repository to your local machine in a path of your choice. This location will be referred to from here on by <code>/path/to/lm</code>. In an empty folder, create <em>flags.mk</em> file containing the necessary variables. A working starting example with annotations can be produced with the included <em>genflags.py</em> utility e.g.:</p> <p><code>/path/to/lm/genflags.py intel opt &gt; flags.mk # if using intel compilers</code></p> <p>If an mpi version is to be built the relevant variables in the file have to be set to the appropriate compiler wrappers or alternatively the mpi INCLUDE paths and libraries need to be specified, together with the necessary preprocessing flags. An mpi enabled example of <em>flags.mk</em> can be obtained by appending mpi to the <em>genflags.py</em> command line arguments above.</p> <p>In the same folder where you created the <em>flags.mk</em> file, compile the program using the scons utility. If the scons program is not installed in your machine, a local version provided in <code>/path/to/lm/scons-local/scons.py</code> can be used, just replace all occurrences of scons in the following commands. The dependency resolution, compilation, and linking is facilitated by the scons utility. For example</p> <p><code>scons -Y /path/to/lm/ -j 16 all</code></p> <p>will build target all using up to 4 simultaneous compilation/linking processes. For a list of available targets execute the above without all. For a list of scons options use <code>--help</code>.</p> <p>It is advisable to test the build. Each module has a related set of tests which can be invoked with the following command after replacing <code>&lt;modulename&gt;</code> with one of the modules: lm, fp, gf, pgf, sx, gwd, optics, tb, mol, dmft, gw.</p> <p><code>scons -Y /path/to/lm/ check&lt;modulename&gt;</code></p> <p>Just as the build itself, multiple tests can be run simultaneously with the <code>-j N</code> option to scons. The following convenience command will start all available tests:</p> <p><code>scons -Y /path/to/lm/ checks</code></p> <h2 id="notes">Notes</h2> <p>If compiler optimisations cause erroneous results one may wish to set lower level of optimisations for certain sensitive files only or have a number of different flags applying to different groups of files. If such is the case the <em>flags.mk</em> file may be modified to contain the the special flags for a group of files in a variable beginning with lessflags and ending in a word of one’s choosing. Then a variable beginning with lessfiles and ending in the word chosen for the lessflags variable, must be defined containing the questionable file names relative to the <code>lm/</code> path. Many pairs of special flags/sensitive files groups are allowed so long as the contents of the lesserfiles variables do not overlap.</p> <p>To obtain an example containing special flags try <code>genflags.py intel opt</code></p> <p>On CRAY installations it is advisable to use cray’s compiler wrappers cc, ftn and CC with the intel backend. Assuming the default backend is cray, module swap PrgEnv-cray PrgEnv-intel switch your environment to intel. The wrappers bundle pretty much all standard system libs (BLAS, LAPACK, SCALAPACK, FFTW3, MPI etc..) except libxc. genflags cray opt will give a reasonable starting point for such an endeavour. The executables (and possibly other files in future) can be installed in a path defined in a variable named ‘prefix’ in the <em>flags.mk</em> file. Subsequent <code>scons -Y /path/to/lm/ install</code> will copy only the binaries already build, without introducing any additional dependencies.</p> <h2 id="known-problems-and-bugs">Known problems and bugs</h2> <p>Apple’s darwin operating system:</p> <ol> <li> <p>The standard functions diff, zdiff and awk are less versatile than the linux (gnu) equivalents. Some of the testing scripts make use of the extra versatility of gnu versions. Before running the standard checks, please install the gnu versions of diff and awk, e.g. using macports.Also copy zdiff from a linux system and park it in the directory where diff is located.</p> </li> <li> <p>The gnu BLAS library has some bugs, e.g. the one that accompanies gcc Apple LLVM version 6.1.0 and GNU Fortran 5.1.0 Some of them have been worked around, but zdotc needs to be replaced. Pick up a distribution of zdotc from, <a href="http://www.netlib.org/lapack/explore-html/d6/db8/zdotc_8f_source.html">e.g.</a> Put it into the slatsm directory, and update SConscript (or Makefile if you are using the old installation)</p> </li> </ol> <p>Intel’s mkl library</p> <ol> <li>fftw3 is buggy for some special cases, at least in some of the older versions of the library. You can download the fftw3 library from http://www.fftw.org/ and install it yourself. The bugs seem to have been corrected in v15 of the library.</li> </ol> </article> </div><!-- /.medium-12.columns --> </div><!-- /.row --> <div id="up-to-top" class="row"> <div class="small-12 columns" style="text-align: right;"> <a class="iconfont" href="#top-of-page">&#xf108;</a> </div><!-- /.small-12.columns --> </div><!-- /.row --> <footer id="footer-content" class="bg-grau"> <div id="footer"> <div class="row"> <div class="medium-6 large-5 columns"> <h5 class="shadow-black">About This Site</h5> <p class="shadow-black"> »LM Suite« is a program for for LMTO and GW simulations. <a href="https://lordcephei.github.io/info/">More ›</a> </p> </div><!-- /.large-6.columns --> <div class="small-6 medium-3 large-3 large-offset-1 columns"> <h5 class="shadow-black">Services</h5> <ul class="no-bullet shadow-black"> <li > <a href="https://lordcephei.github.io" title=""></a> </li> <li class="services-contact" > <a href="https://lordcephei.github.io/contact/" title="Contact">Contact</a> </li> <li class="list" > <a href="https://lordcephei.github.io/developers/" title="Contact the developers">Developers</a> </li> <li class="sitemap-link" > <a href="https://lordcephei.github.io/download/" title="Download the program">Downloads</a> </li> </ul> </div><!-- /.large-4.columns --> <div class="small-6 medium-3 large-3 columns"> <h5 class="shadow-black">Related websites</h5> <ul class="no-bullet shadow-black"> <li > <a href="https://lordcephei.github.io" title=""></a> </li> <li class="network-entypo" > <a href="http://lmsuite.org" target="_blank" title="">Original LM Suite</a> </li> </ul> </div><!-- /.large-3.columns --> </div><!-- /.row --> </div><!-- /#footer --> <div id="subfooter"> <nav class="row"> <section id="subfooter-left" class="b30 small-12 medium-6 columns"> <ul class="inline-list"> <li>Created with &hearts; by <a style="display:inline;" href="http://phlow.de/">Phlow</a> with <a style="display:inline;" href="http://jekyllrb.com/" target="_blank">Jekyll</a> using <a style="display:inline;" href="http://phlow.github.io/feeling-responsive/">Feeling Responsive</a> </li> </ul> </section> <section id="subfooter-right" class="small-12 medium-6 columns social-icons"> <ul class="inline-list"> <li><a href="http://www.youtube.com/PhlowMedia" target="_blank" class="icon-youtube" title="Videos, Video-Anleitungen und Filme von Phlow auf YouTube"></a></li> <li><a href="http://twitter.com/phlow" target="_blank" class="icon-twitter" title="Immer das Neuste von Phlow gibt es auf Twitter"></a></li> <li><a href="http://www.facebook.com/phlow.media" target="_blank" class="icon-facebook" title="Lass uns Freunde sein!"></a></li> <li><a href="http://soundcloud.com/phlow" target="_blank" class="icon-soundcloud" title="Sounds und Downloads und mehr"></a></li> <li><a href="http://github.com/phlow" target="_blank" class="icon-github" title="Code und mehr..."></a></li> <li><a href="http://instagram.com/phlowmedia" target="_blank" class="icon-instagram" title="Bilder und Impressionen mit und ohne Filter..."></a></li> <li><a href="http://www.pinterest.com/phlowmedia/" target="_blank" class="icon-pinterest" title="Bilder, Fotos, Illustrationen, Grafiken sammeln..."></a></li> <li><a href="http://www.mixcloud.com/phlow/" target="_blank" class="icon-cloud" title="Mixe, was sonst?"></a></li> </ul> </section> </nav> </div><!-- /#subfooter --> </footer> <script src="https://lordcephei.github.io/assets/js/javascript.min.js"></script> <script> $("#masthead").backstretch("http://lordcephei.github.io/images/header_drop.jpg", {fade: 700}); $("#masthead-with-text").backstretch("http://lordcephei.github.io/images/header_drop.jpg", {fade: 700}); </script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-60112281-1', 'auto'); ga('set', 'anonymizeIp', true); ga('send', 'pageview'); </script> </body> </html>
