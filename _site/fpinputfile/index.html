<!doctype html> <html class="no-js" lang="en"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <title>LM Suite - Full Potential LDA Input</title> <link rel="stylesheet" href="https://lordcephei.github.io/assets/css/styles_feeling_responsive.css"> <script src="https://lordcephei.github.io/assets/js/modernizr.min.js"></script> <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script> <script> WebFont.load({ google: { families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ] } }); </script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> <noscript> <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic|Volkhov' rel='stylesheet' type='text/css'> </noscript> <meta name="google-site-verification" content="KBbEPlf44q4dfL6SBHqymelMqXBSuZHSXIo-ZfkQLbE" /> <meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" /> <meta name="description" content=""/> <link rel="author" href="https://plus.google.com/u/0/104386739373934968982"/> <link rel="icon" sizes="32x32" href="https://lordcephei.github.io/assets/img/favicon-32x32.png"> <link rel="icon" sizes="192x192" href="https://lordcephei.github.io/assets/img/touch-icon-192x192.png"> <link rel="apple-touch-icon-precomposed" sizes="180x180" href="https://lordcephei.github.io/assets/img/apple-touch-icon-180x180-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://lordcephei.github.io/assets/img/apple-touch-icon-152x152-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://lordcephei.github.io/assets/img/apple-touch-icon-144x144-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://lordcephei.github.io/assets/img/apple-touch-icon-120x120-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://lordcephei.github.io/assets/img/apple-touch-icon-114x114-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://lordcephei.github.io/assets/img/apple-touch-icon-76x76-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://lordcephei.github.io/assets/img/apple-touch-icon-72x72-precomposed.png"> <link rel="apple-touch-icon-precomposed" href="https://lordcephei.github.io/assets/img/apple-touch-icon-precomposed.png"> <meta name="msapplication-TileImage" content="https://lordcephei.github.io/assets/img/msapplication_tileimage.png"/> <meta name="msapplication-TileColor" content="#fabb00"> <!-- Facebook Optimization --> <meta property="og:locale" content="en_EN" /> <meta property="og:type" content="website" /> <meta property="og:title" content="LM Suite - Full Potential LDA Input" /> <meta property="og:description" content="»LM Suite« is a program for for LMTO and GW simulations."/> <meta property="og:url" content="https://lordcephei.github.io//fpinputfile/" /> <meta property="og:site_name" content="LM Suite" /> <!-- Search Engine Optimization --> <link type="text/plain" rel="author" href="https://lordcephei.github.io/humans.txt" /> <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script> <style type="text/css"> red { color:purple; /*This changes the color of your text */ font-size:24pt; /*This changes the font size of your text */ } </style> </head> <body id="top-of-page" class="page-fullwidth"> <div id="navigation" class="sticky"> <nav class="top-bar" data-topbar> <ul class="title-area"> <li class="name"> <h1 class="show-for-small-only"><a href="https://lordcephei.github.io" class="icon-tree"> LM Suite</a></h1> </li> <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone --> <li class="toggle-topbar menu-icon"><a href="#"><span>Navigation</span></a></li> </ul> <section class="top-bar-section"> <ul class="right"> <script language="Javascript" type="text/javascript"> function google_search() { var query = document.getElementById("google-search").value; window.open("http://google.com/search?q=" + query + "%20site:" + "https://lordcephei.github.io"); } </script> <li class="divider"></li> <li style="background:#FFFFFF"> <form style="width:200px" onsubmit="google_search()" > <input type="text" id="google-search" placeholder="Enter search term and hit enter"> </form> </li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/contact/">Contact</a></li> </ul> <ul class="left"> <li><a href="https://lordcephei.github.io/">Start</a></li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/blog/">News and Updates</a></li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/developers/">Developers</a></li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://lordcephei.github.io/docs/">Documentation</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/install/">Installation</a></li> <li><a href="https://lordcephei.github.io/fplmtoverview/">FP Overview</a></li> <li><a href="https://lordcephei.github.io/fpcapabilities/">FP Capabilities</a></li> <li><a href="https://lordcephei.github.io/inputguide/">The Input File</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://lordcephei.github.io">Tutorials</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/buildingfpinput/">Building the FP Input File</a></li> <li><a href="https://lordcephei.github.io/fpnew/">Tutorial for the full-potential LDA program lmf</a></li> <li><a href="https://lordcephei.github.io/fpoptbas/">FP basis optimisation</a></li> <li><a href="https://lordcephei.github.io/extbfield/">Adding external Zeeman field to the potential</a></li> <li><a href="https://lordcephei.github.io/fstut/">Generating a Fermi surface in spin polarized Fe</a></li> <li><a href="https://lordcephei.github.io/lmtut/">LM Tutorial</a></li> <li><a href="https://lordcephei.github.io/asadoc/">ASA tutorial</a></li> </ul> </li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/formatting/">Site Contribution</a></li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/about/">About</a></li> <li class="divider"></li> </ul> </section> </nav> </div><!-- /#navigation --> <div id="masthead"> <div class="row"> <div class="small-12 columns"> <a id="logo" href="https://lordcephei.github.io" title="LM Suite – Simulating the world one bit at a time."> <img src="https://lordcephei.github.io/assets/img/logo3.png" alt="LM Suite – Simulating the world one bit at a time."> </a> </div><!-- /.small-12.columns --> </div><!-- /.row --> </div><!-- /#masthead --> <div class="row t30"> <div class="medium-12 columns"> <article> <header> <p class="subheadline"></p> <h1>LM Suite - Full Potential LDA Input</h1> </header> <p class="teaser"> </p> <p>To go back to the preliminaries click <a href="/fpnew/">here</a>.</p> <p>Start in the top-level directory. This sample helps you create a complete input file for elemental Al, including optimizing the parameters for the basis set. The file is then used to compute a shear constant. You may create some or all of your own input file from scratch; or you can just copy file <a href="FPsamples/ctrl.al">doc/FPsamples/ctrl.al</a> to the top-level directory.</p> <p>Many categories are nearly identical to those in the <a href="/asadoc/">ASA tutorial</a>:</p> <ul> <li> <p>create category <a href="tokens.html#VERScat">VERS</a>. <strong>lmf</strong> requires token FP:7</p> </li> <li> <p>(optional) create the <a href="tokens.html#HEADERcat">HEADER</a> category.</p> </li> <li> <p>Set up the crystal structure, categories <a href="tokens.html#STRUCcat">STRUC</a> and <a href="tokens.html#SITEcat">SITE</a>.</p> <p>Al is fcc, with a lattice constant 7.606 a.u. at 0K. The input file could have read</p><pre><code>      STRUC ALAT=7.606  
</code></pre><p>but instead the template <a href="FPsamples/ctrl.al">doc/FPsamples</a> declares a symbolic variable `a’ in the <a href="tokens.html#CONSTcat">CONST</a> category and uses</p><pre><code>      STRUC ALAT=a  
</code></pre><p>Doing it this way enables you to alter the lattice constant via the command-line, e.g. with switch -va=7.1.</p> </li> <li> <p>Build the <a href="tokens.html#SPECcat">SPEC</a> to supply chemical species information. <a href="tokens.html#STRUCcat">STRUC</a>, <a href="tokens.html#SITEcat">SITE</a>, <a href="tokens.html#SPECcat">SPEC</a> are all described in the <a href="ASAtutorial.html#STRUC">ASA tutorial</a>; see <a href="ASAtutorial.html#SPEC">SPEC</a> there for a discussion of the choice muffin tin radius. In the present case, we choose RMT=0.91*avw (avw=space-filling radius appropriate to the ASA). This makes sphere overlaps ~0.6%, as can be verified with <a href="#preliminaries"><strong>lmchk</strong></a>. Strictly speaking spheres should not overlap (geometry violation), but because of the special way the local densites are handled, overlaps of up to 10% or so make negligible errors. The main drawback is that <a href="#selfconsistency">self-consistency</a> tends to be more difficult when overlaps extend to 10%.</p> <p>The principal complication <strong>lmf</strong> has over the ASA is the need to specify the shape of the <a href="fp.html#smoothH">smoothed Hankel envelope functions</a> which define the basis. (A smoothed Hankel is a <a href="nfp-doc.ps">convolution of a Gaussian and a Hankel function</a>). Each <em>s</em>, <em>p</em>, <em>d</em>,… orbital has <a href="fp.html#spec">two independent parameters</a> (Gaussian smoothing radius and Hankel energy), which you are free to choose. The extra freedom is advantageous in that they offer more flexibility than do ordinary Hankel functions; also they are smoother and regular at the origin. On the flip side, there is no obvious <em>a priori</em> way to choose these parameters, which make it cumbersome to find an optimal basis. The simplest way is to choose these parameters is to follow the automatic procedure described <a href="Building_FP_input_file.html#autobas">on this page</a>.</p> <p>When choosing parameters by hand, a reasonable default is to set the smoothing radius (see RSMH below) to 2/3 of the augmentation radius for <em>s</em> and <em>p</em> orbitals, and about 1 or so for transition metal <em>d</em> orbtals. To improve on the basis it is recommended you avail yourself of the basis optimizer. See <a href="FPoptbas.html">here</a> for a (somewhat outdated) tutorial; it is also covered <a href="/fpbasisset/">later in the present tutorial</a>.</p> <p>doc/FPsamples/ctrl.al uses by default a minimal basis of <em>spd</em> orbitals, defined in the following lines:</p><pre><code>       % const rsm1=1.8 rsmd1=1.8 ed1=-.1                 ← The const directive is described in the [preprocessor documentation](file-preprocessor.html#constdef)
     RSMH={rsm1},{rsm1},{rsmd1} EH=-.1,-.1,{ed1}      ← The contents of curly brackets are [evaluated as expressions](file-preprocessor.html#expressions)
</code></pre><p>1.8 is 2/3 of the MT radius, 2.7. Al is an easy case: all states are nearly free electron-like. When we optimize the basis later, we will see that it is good choice. The choice of EH is usually less important (unless a state is very deep, such as the Oxygen <em>s</em> state); typically choose a small negative number, e.g. −0.1.</p> <p>Note the additional lines in doc/FPsamples/ctrl.al:</p><pre><code>       %ifdef bigbas
   % const rsm2=1.8
     RSMH2={rsm2},0,{rsmd1} EH2=-1,-1,-1
   %endif
</code></pre><p>If bigbas is nonzero (either by changing ctrl.al or by invoking <strong>lmf</strong> with -vbigbas=1), the basis set is enlarged from <em>spd</em> to <em>spdsd</em>. <br /> RSMH2 has nonzero values in the <em>s</em> and <em>d</em> channels only; channels for which RSMH2=0 are excluded from the basis.</p> <p>When you use RSMH2 you should set EH2 to about 0.8 or 1 Ry deeper than EH1; otherwise the basis becomes too linearly dependent.</p> </li> <li> <p>create the <a href="tokens.html#HAMcat">HAM</a> category. Most important here is GMAX, which specifies the cutoff in <strong>G</strong> vectors for the interstitial density. A uniform mesh of G vectors is generated; it keeps those for which G. This number is important because execution efficiency depends on it (though for one atom/cell, efficiency isn’t important). It is exactly analogous to GMAX you must specify when using a plane-wave (pseudopotential or augmented plane wave) basis, except that here it is used for the density only, not both density and basis.</p> <p>You must specify one of GMAX or FTMESH. <strong>lmf</strong> first looks for GMAX; if it isn’t found, FTMESH is sought. If <em>neither</em> is found, <strong>lmf</strong> stops. Both are present in <a href="FPsamples/ctrl.al">doc/FPsamples/ctrl.al</a>, but only GMAX is used since it is sought first. It turns out that both modes will specify a mesh with 10 divisions along each axis: FTMESH=10 10 10.</p> </li> <li> <p>Create the <a href="tokens.html#OPTIONScat">OPTIONS</a> category. Of note here is this text: HF={hf}. `hf’ is an algebraic variable set by the <a href="file-preprocessor.html#constdef">const preprocessor directive</a>:</p><pre><code>       % const hf=f
</code></pre><p>This will create hf and initialize it to zero. However, if you assign hf in some prior directive on the command line (using e.g. -vhf=1), the `const’ will not override its value. Note that <a href="FPsamples/ctrl.al">doc/FPsamples/ctrl.al</a>, uses hf in this line</p><pre><code>       OPTIONS NSPIN=1 REL=t XCFUN=2 HF={hf}
</code></pre><p>With a command-line switch -vhf=1 we can make non self-consistent calculations, which yield approximate energies via the <a href="http://link.aps.org/doi/10.1103/PhysRevB.39.12520">Harris-Foulkes functional</a>. We will use this feature to optimize the basis set (see discussion of <a href="#basisoptimization">basis optimization</a> below).</p> </li> <li> <p>create the <a href="tokens.html#BZcat">BZ</a> category. Note the following:</p> <ol> <li> <p>NKABC and BJOB specify the <em>k</em>-point mesh.</p> </li> <li> <p>SAVDOS, NPTS, and DOS specify that the total density-of-states is to be created each time the Fermi level is determined.</p> </li> <li> <p>W=.002 EF0=0 DELEF=.1 are only relevant for sampling, so they aren’t used in this tutorial, which uses tetrahedron integration (TETRA=t).</p> </li> <li> <p>when HF=t, we also use NEVMX=-1 to suppress generation of the output density through this construct:</p><pre><code>        % ifdef hf
      NEVMX=-1
    % endif
</code></pre><p>The preprocessor will include the line `NEVMX=-1’ in the input file only when hf is nonzero.</p> </li> <li> <p>We choose METAL=2; see documentation for the <a href="tokens.html#BZcat">BZ category</a>. <br /> <em>*Note</em> METAL=5 is usually a better choice, provided you are not limited by memory.</p> </li> </ol> </li> <li> <p>The <a href="tokens.html#EWALDcat">EWALD</a> category is optional is included here only for pedagogical purposes.</p> </li> <li> <p>The <a href="tokens.html#ITERcat">ITER</a> category controls the number of iterations, convergence citeria, and the how earlier densities are mixed with the current one, which you can set through MIX. See <a href="tokens.html#mixing">here</a> for a description. This input file uses MIX=A3, which tells <strong>lmf</strong> to use Anderson mixing with up to three prior pairs of (input,output) density. But there are <a href="tokens.html#mixing">many possible modifications</a>. Unfortunately there is no good general prescription for MIX: cases with combined “hard” and “soft” degrees of freedom can be hard to stabilize (magnetic systems are often that way). Broyden mixing tends to work best, but like a racehorse it can be jittery. In the <strong>lmf</strong> context, MIX is best used in conjunction with ELIND; see discussion of ELIND in <a href="tokens.html#HAMcat">HAM</a>. <br /> For examples run these scripts:</p><pre><code>       testing/test.lm mix    (for the ASA program **lm**) 

       fp/test/test.fp copt   (for the FP program **lmf**) 
</code></pre><p><a href="tokens.html#ITERcat">CONV</a> and <a href="tokens.html#ITERcat">CONVC</a> control the convergence criteria in energy and charge, respectively. (You can use one or the other or both.) In <a href="FPsamples/ctrl.al">doc/FPsamples/ctrl.al</a> both are set to very strict values, because the shear constant which we are going to calculate involves small energy changes.</p> </li> </ul> <p>This completes the creation of the input file, except that so far we just took a guess at the selection of basis set.</p> <p>To go back to the preliminaries click <a href="/fpnew/">here</a>.</p> </article> </div><!-- /.medium-12.columns --> </div><!-- /.row --> <div id="up-to-top" class="row"> <div class="small-12 columns" style="text-align: right;"> <a class="iconfont" href="#top-of-page">&#xf108;</a> </div><!-- /.small-12.columns --> </div><!-- /.row --> <footer id="footer-content" class="bg-grau"> <div id="footer"> <div class="row"> <div class="medium-6 large-5 columns"> <h5 class="shadow-black">About This Site</h5> <p class="shadow-black"> »LM Suite« is a program for for LMTO and GW simulations. <a href="https://lordcephei.github.io/info/">More ›</a> </p> </div><!-- /.large-6.columns --> <div class="small-6 medium-3 large-3 large-offset-1 columns"> <h5 class="shadow-black">Services</h5> <ul class="no-bullet shadow-black"> <li > <a href="https://lordcephei.github.io" title=""></a> </li> <li class="services-contact" > <a href="https://lordcephei.github.io/contact/" title="Contact">Contact</a> </li> <li class="list" > <a href="https://lordcephei.github.io/developers/" title="Contact the developers">Developers</a> </li> <li class="sitemap-link" > <a href="https://lordcephei.github.io/download/" title="Download the program">Downloads</a> </li> </ul> </div><!-- /.large-4.columns --> <div class="small-6 medium-3 large-3 columns"> <h5 class="shadow-black">Related websites</h5> <ul class="no-bullet shadow-black"> <li > <a href="https://lordcephei.github.io" title=""></a> </li> <li class="network-entypo" > <a href="http://lmsuite.org" target="_blank" title="">Original LM Suite</a> </li> </ul> </div><!-- /.large-3.columns --> </div><!-- /.row --> </div><!-- /#footer --> <div id="subfooter"> <nav class="row"> <section id="subfooter-left" class="b30 small-12 medium-6 columns"> <ul class="inline-list"> <li>Created with &hearts; by <a style="display:inline;" href="http://phlow.de/">Phlow</a> with <a style="display:inline;" href="http://jekyllrb.com/" target="_blank">Jekyll</a> using <a style="display:inline;" href="http://phlow.github.io/feeling-responsive/">Feeling Responsive</a> </li> </ul> </section> <section id="subfooter-right" class="small-12 medium-6 columns social-icons"> <ul class="inline-list"> <li><a href="http://www.youtube.com/PhlowMedia" target="_blank" class="icon-youtube" title="Videos, Video-Anleitungen und Filme von Phlow auf YouTube"></a></li> <li><a href="http://twitter.com/phlow" target="_blank" class="icon-twitter" title="Immer das Neuste von Phlow gibt es auf Twitter"></a></li> <li><a href="http://www.facebook.com/phlow.media" target="_blank" class="icon-facebook" title="Lass uns Freunde sein!"></a></li> <li><a href="http://soundcloud.com/phlow" target="_blank" class="icon-soundcloud" title="Sounds und Downloads und mehr"></a></li> <li><a href="http://github.com/phlow" target="_blank" class="icon-github" title="Code und mehr..."></a></li> <li><a href="http://instagram.com/phlowmedia" target="_blank" class="icon-instagram" title="Bilder und Impressionen mit und ohne Filter..."></a></li> <li><a href="http://www.pinterest.com/phlowmedia/" target="_blank" class="icon-pinterest" title="Bilder, Fotos, Illustrationen, Grafiken sammeln..."></a></li> <li><a href="http://www.mixcloud.com/phlow/" target="_blank" class="icon-cloud" title="Mixe, was sonst?"></a></li> </ul> </section> </nav> </div><!-- /#subfooter --> </footer> <script src="https://lordcephei.github.io/assets/js/javascript.min.js"></script> <script> $("#masthead").backstretch("http://lordcephei.github.io/images/header_drop.jpg", {fade: 700}); $("#masthead-with-text").backstretch("http://lordcephei.github.io/images/header_drop.jpg", {fade: 700}); </script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-60112281-1', 'auto'); ga('set', 'anonymizeIp', true); ga('send', 'pageview'); </script> </body> </html>
