<!doctype html> <html class="no-js" lang="en"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <title>LM Tutorial</title> <link rel="stylesheet" href="https://lordcephei.github.io/assets/css/styles_feeling_responsive.css"> <script src="https://lordcephei.github.io/assets/js/modernizr.min.js"></script> <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script> <script> WebFont.load({ google: { families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ] } }); </script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> <noscript> <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic|Volkhov' rel='stylesheet' type='text/css'> </noscript> <meta name="google-site-verification" content="KBbEPlf44q4dfL6SBHqymelMqXBSuZHSXIo-ZfkQLbE" /> <meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" /> <meta name="description" content=""/> <link rel="author" href="https://plus.google.com/u/0/104386739373934968982"/> <link rel="icon" sizes="32x32" href="https://lordcephei.github.io/assets/img/favicon-32x32.png"> <link rel="icon" sizes="192x192" href="https://lordcephei.github.io/assets/img/touch-icon-192x192.png"> <link rel="apple-touch-icon-precomposed" sizes="180x180" href="https://lordcephei.github.io/assets/img/apple-touch-icon-180x180-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://lordcephei.github.io/assets/img/apple-touch-icon-152x152-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://lordcephei.github.io/assets/img/apple-touch-icon-144x144-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://lordcephei.github.io/assets/img/apple-touch-icon-120x120-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://lordcephei.github.io/assets/img/apple-touch-icon-114x114-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://lordcephei.github.io/assets/img/apple-touch-icon-76x76-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://lordcephei.github.io/assets/img/apple-touch-icon-72x72-precomposed.png"> <link rel="apple-touch-icon-precomposed" href="https://lordcephei.github.io/assets/img/apple-touch-icon-precomposed.png"> <meta name="msapplication-TileImage" content="https://lordcephei.github.io/assets/img/msapplication_tileimage.png"/> <meta name="msapplication-TileColor" content="#fabb00"> <!-- Facebook Optimization --> <meta property="og:locale" content="en_EN" /> <meta property="og:type" content="website" /> <meta property="og:title" content="LM Tutorial" /> <meta property="og:description" content="»LM Suite« is a program for for LMTO and GW simulations."/> <meta property="og:url" content="https://lordcephei.github.io//lmtut/" /> <meta property="og:site_name" content="LM Suite" /> <!-- Search Engine Optimization --> <link type="text/plain" rel="author" href="https://lordcephei.github.io/humans.txt" /> <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script> <style type="text/css"> red { color:purple; /*This changes the color of your text */ font-size:24pt; /*This changes the font size of your text */ } </style> </head> <body id="top-of-page" class="page-fullwidth"> <div id="navigation" class="sticky"> <nav class="top-bar" data-topbar> <ul class="title-area"> <li class="name"> <h1 class="show-for-small-only"><a href="https://lordcephei.github.io" class="icon-tree"> LM Suite</a></h1> </li> <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone --> <li class="toggle-topbar menu-icon"><a href="#"><span>Navigation</span></a></li> </ul> <section class="top-bar-section"> <ul class="right"> <script language="Javascript" type="text/javascript"> function google_search() { var query = document.getElementById("google-search").value; window.open("http://google.com/search?q=" + query + "%20site:" + "https://lordcephei.github.io"); } </script> <li class="divider"></li> <li style="background:#FFFFFF"> <form style="width:200px" onsubmit="google_search()" > <input type="text" id="google-search" placeholder="Enter search term and hit enter"> </form> </li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/contact/">Contact</a></li> </ul> <ul class="left"> <li><a href="https://lordcephei.github.io/">Start</a></li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/blog/">News and Updates</a></li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/developers/">Developers</a></li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://lordcephei.github.io/docs/">Documentation</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/insert/">Package Overview</a></li> <li><a href="https://lordcephei.github.io/install/">Installation</a></li> <li><a href="https://lordcephei.github.io/fplmtoverview/">FP Overview</a></li> <li><a href="https://lordcephei.github.io/fpcapabilities/">FP Capabilities</a></li> <li><a href="https://lordcephei.github.io/inputguide/">The Input File</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://lordcephei.github.io">Tutorials</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/lmtut/">Basic GW Tutorial</a></li> <li><a href="https://lordcephei.github.io/asadoc/">ASA tutorial</a></li> <li><a href="https://lordcephei.github.io/buildingfpinput/">Building the FP Input File</a></li> <li><a href="https://lordcephei.github.io/fpnew/">Tutorial for the full-potential LDA program lmf</a></li> <li><a href="https://lordcephei.github.io/fpoptbas/">FP basis optimisation</a></li> <li><a href="https://lordcephei.github.io/extbfield/">Adding external Zeeman field to the potential</a></li> <li><a href="https://lordcephei.github.io/fstut/">Generating a Fermi surface in spin polarized Fe</a></li> </ul> </li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/formatting/">Site Contribution</a></li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/about/">About</a></li> <li class="divider"></li> </ul> </section> </nav> </div><!-- /#navigation --> <div class="row t30"> <div class="medium-12 columns"> <article> <header> <p class="subheadline"></p> <h1>LM Tutorial</h1> </header> <p class="teaser"> </p> <h1 id="basic-lm-tutorial">Basic LM tutorial</h1> <p>To perform a very basic QSGW calculation and set up for more accurate/specific calculations of SbSBr (or any other structure starting from POSCAR) the following steps can be used as a basic tutorial. This tutorial will take you from POSCAR to qsGW in 6 very simple steps.</p> <h3 id="step-1-crystal-structure"><em>Step 1: Crystal structure</em></h3> <p>The first step is to extract the site/crystall structure from the POSCAR file. This can be achieved in two methods using ”<em style="color: green">poscar2init</em>” or ”<em style="color: green">poscar2site</em>”, both write output as <em style="color: blue">stdout</em> while ”<em style="color: green">poscar2site</em>” also creates a file named ”<em style="color: green">site</em>”. To use just execute in the directory with the POSCAR file. The output of the two executables are very similar, ”Site” file is more convenient when the <em style="color: blue">ctrl.ext</em> file has been prepared and only the ”<em style="color: green">site.ext</em>” is needed, while <em style="color: green">init.ext</em> can be used to create a simple template input file (hence recommended for 1st runs).</p> <div onclick="elm = document.getElementById('box1'); if(elm.style.display == 'none') elm.style.display = 'block'; else elm.style.display = 'none';">Click here to show or hide.</div> <p><div style="display:none;" id="box1"></p> <p>To create ”<em style="color: green">init.ext</em>” invoke the following command in the directory containing the POSCAR,</p><pre><code>$poscar2init &gt; init.ext
</code></pre><p>(ext should be replaced by an appropriate extension for the material e.g Si for silicon,mapi for NH3CH3PbI3).</p> <p></div></p> <h3 id="step-2-initial-control-file"><em>Step 2: Initial control file</em></h3> <p>With the crystal structure at hand the lm package is capable of creating a basic control file for you, simply use the command</p><pre><code>$blm −−gw init.ext
</code></pre><p>which will create <em style="color: green">actrl.ext</em> which is almost ready for DFT calculations, the ”a” in ”<em style="color: green">actrl.ext</em>” is there so existing <em style="color: green">ctrl.ext</em> files are not over written. The <em style="color: blue">−−gw</em> switch produces an <em style="color: green">init.ext</em> file more suited for GW calculation. The file is set-up with very basic tokens/switches and the rest are set as their default values, of course more can be specified manually in the ctrl file. The list of input switches are available <a href="http://titus.phy.qub.ac.uk/packages/LMTO/tokens.html">here</a>, this is slightly outdated but all the information there should be enough for a full DFT and QSGW plus some extra features; You can also use ”<em style="color: blue">−−input</em>”</p><pre><code>$ lmf −−input
</code></pre><p>to print out a full list of all available input options.</p> <h3 id="step-3-dft-set-up"><em>Step 3: DFT set up</em></h3> <p>To run GW calculation you must first get a self consistent DFT calculation, here are the basic steps needed for the full-potential(FP) approach (this is more versatile than atomic sphere approximation (ASA) but also slower). start by making a ctrl file that the lmto package can access:</p><pre><code>$cp actrl.ext ctrl.ext
</code></pre><p>before starting with FP the atomistic densities and the basis are need, these parameters can be obtained by:</p><pre><code>$lmfa ctrl.ext
</code></pre><div onclick="elm = document.getElementById('box3'); if(elm.style.display == 'none') elm.style.display = 'block'; else elm.style.display = 'none';">Click here to show or hide.</div> <p><div style="display:none;" id="box3"></p> <p>There are two important result to take note of at this stage; The first is the GMAX written at the end of the stdout, the other is the <em style="color: green">basp0.ext</em> file which contains the basis parameters (the ”0” is there not to over write previous <em style="color: green">basp.ext</em> files, note that the basis set can be set in the ctrl file as well). To perform a DFT-FP calculation add the GMAX from stdout to the HAM GMAX in the ctrl file and move <em style="color: green">basp0.ext</em> to <em style="color: green">basp.ext</em>. Some times it is necessary to repeat this step once to avoid crashes in the future.</p> <p></div></p> <h3 id="step-4-dft"><em>Step 4: DFT</em></h3> <p>Run a DFT-FP calculation by</p><pre><code>$ lmf ctrl.ext
</code></pre><p>This may give you an error regarding the k-mesh settings. The k-mesh division NKABC has been set to zero which is not valid, to proceed change the value in ctrl file (under BZ NKABC) or execute</p><pre><code>$ lmf ctrl.ext -vnk=4
</code></pre><p>This will set NKABC as 4x4x4.This should be enough for a self consistent calculation, you may also have to set a value for the number of iteration in <em style="color: blue">ITER NIT</em> or <em style="color: blue">-vnit=</em> in command line. Other parameters which are important even for a basic preliminary DFT calculation may include things such as spin polarization and spin orbit coupling; While you may find other parameters become key for certain materials.</p> <h3 id="step-5-gw-set-upalmost-there"><em>Step 5: GW set up(almost there)</em></h3> <p>once self consistency has been achieved with the desired parameters within DFT, you can start a qsGW calculation. First you have to create input files for the GW package, once again the lmto package make a template for you by using</p><pre><code>$ echo -1 | lmfgwd ctrl.ext alternatively invoke

$ lmfgwd ctrl.ext
</code></pre><p>to see all options available through <em style="color: blue">lmfgwd</em>. This should create a number of files one of which is <em style="color: green">GWinput</em>; this serves as the input file for all GW based calculations. Variables are documented within the file, further information can be found in the Darsbury lecture power points and documentation folder of the lm package.</p> <h3 id="step-6-sanity-check"><em>Step 6: Sanity check</em></h3> <p>To check that the GW files created are <em style="color: blue">comOPTICS MODE=pelete</em> for a qsgw run, and to check for some errors simply run:</p><pre><code>$ echo -2 | lmfgwd ctrl.ext
</code></pre><p>with this method crashes during GW runs are minimized.</p> <h3 id="step-7-qsgw-and-we-are-done"><em>Step 7: qsGW (and we are done)</em></h3> <p>To run qsGW calculation the following command is invoked</p><pre><code>$lmgwsc ext
</code></pre><p>once self-consistency has been achieved the file ”<em style="color: green">sigm.ext</em>” (the self energy, Σ from Hedin’s equations) can be used with lmf. Running a FP calculation in the same directory will now include the electronic self energy obtained from qsGW. Using the lmf with <em style="color: green">sigm.ext</em> allows for qsGW level calculations of Band structure, optics, DOS ……. with much faster speed as the lmf uses the single particle approximation.</p> <h3 id="bonus-step"><em>Bonus Step</em></h3> <h4 id="band-structure">Band structure</h4> <div onclick="elm = document.getElementById('box4'); if(elm.style.display == 'none') elm.style.display = 'block'; else elm.style.display = 'none';">Click here to show or hide.</div> <p><div style="display:none;" id="box4"></p> <p>Creating the band structure is fairly simple. All you have to do is create a file which specifies which branches you want and how fine a mesh you want it for. So create a file called <em style="color: green">syml.ext</em>; the syntax for this file is quite intuitive, each line provides information for each band structure branch to be outputted; Simply specify the number of points in the branch, starting vector and final vector; for example branch Γ to R with 50 k points will be :</p><pre><code>50 0.0 0.0 0.0 0.5 0.5 0.5
</code></pre><p>there are sample syml file in the ASAsampples folder. once you have your syml.ext file simply run</p><pre><code>$ lmf ctrl.ext −−band:fn=syml −−rs=1,0
</code></pre><p>The switch <em style="color: blue">−−band:fn=syml</em> specifies a band structure calculation with the appropriate data, the second switch <em style="color: green">−−rs=1,0</em> tells the program to read from the <em style="color: green">rst.ext</em> file (1st digit is 1) and not to write to the <em style="color: green">rst.ext</em> file (2nd digit is 0), this is recommended so you always use the same self-consistent density with out altering each run.</p> <p></div></p> <h4 id="optics">Optics</h4> <p>Calculating optical properties are slightly dependant on a number of switches used for your calculation.</p> <h5 id="procedure-a">Procedure A</h5> <div onclick="elm = document.getElementById('box5'); if(elm.style.display == 'none') elm.style.display = 'block'; else elm.style.display = 'none';">Click here to show or hide.</div> <p><div style="display:none;" id="box5"></p> <p>First I will discuss for the case of where number of spins (<em style="color: blue">-vnsp=1</em>) or spin orbit coupling is taken into about through ”L·S” (i.e. <em style="color: blue">-vnsp=2</em> and <em style="color: blue">-vso=1</em>). The simplest procedure will be to set <em style="color: blue">OPTICS MODE=1</em> and set energy window and mesh density through <em style="color: blue">OPTICS WINDOW=a b</em> and <em style="color: blue">OPTICS=NPTS</em> respectively, note a and b are in units Rydberg. Now run the program again Cartesian</p><pre><code>$ lmf ctrl.ext −−rs=1,0
</code></pre><p>this will create a file called <em style="color: green">opt.ext</em> which is the imaginary part of the dielectric function. the format of the file is:</p><pre><code>Energy εix εiy εiz
</code></pre><p>where x y and z are the real space directions.</p> <p></div></p> <h5 id="procedure-b">Procedure B</h5> <p>For the case where <em style="color: blue">-vso=3</em> the procedure has to be preformed through two steps. Once with <em style="color: blue">OPTICS MODE=1</em> and once with <em style="color: blue">OPTICS MODE=2</em>, in this mode the <em style="color: green">opt.ext</em> files are spin polarized.</p> <h5 id="joint-density-of-states">Joint Density of States</h5> <p>JDOS is calculated in the same manor as εi but with <em style="color: blue">OPTICS MODE=-1</em> for the case of <em style="color: blue">-vnsp=1</em> or <em style="color: blue">-vnsp=2</em> and <em style="color: blue">-vso=1</em>, and with <em style="color: blue">OPTICS MODE=-1</em> and <em style="color: blue">OPTICS MODE=-2</em> for case <em style="color: blue">-vnsp=2</em> and <em style="color: blue">-vso=3</em>.</p> <h5 id="other-procedures">Other procedures</h5> <p>There are currently 13 optics mode, a brief description of each is given through:</p><pre><code>$ lmf −−input
</code></pre><p>Optics mode 8 (non-equilibrium absorption) and 9 (non-equilibrium emission) will be documented separately.</p> <p></div></p> </article> </div><!-- /.medium-12.columns --> </div><!-- /.row --> <div id="up-to-top" class="row"> <div class="small-12 columns" style="text-align: right;"> <a class="iconfont" href="#top-of-page">&#xf108;</a> </div><!-- /.small-12.columns --> </div><!-- /.row --> <footer id="footer-content" class="bg-grau"> <div id="footer"> <div class="row"> <div class="medium-6 large-5 columns"> <h5 class="shadow-black">About This Site</h5> <p class="shadow-black"> »LM Suite« is a program for for LMTO and GW simulations. <a href="https://lordcephei.github.io/info/">More ›</a> </p> </div><!-- /.large-6.columns --> <div class="small-6 medium-3 large-3 large-offset-1 columns"> <h5 class="shadow-black">Services</h5> <ul class="no-bullet shadow-black"> <li > <a href="https://lordcephei.github.io" title=""></a> </li> <li class="services-contact" > <a href="https://lordcephei.github.io/contact/" title="Contact">Contact</a> </li> <li class="list" > <a href="https://lordcephei.github.io/developers/" title="Contact the developers">Developers</a> </li> <li class="sitemap-link" > <a href="https://lordcephei.github.io/download/" title="Download the program">Downloads</a> </li> </ul> </div><!-- /.large-4.columns --> <div class="small-6 medium-3 large-3 columns"> <h5 class="shadow-black">Related websites</h5> <ul class="no-bullet shadow-black"> <li > <a href="https://lordcephei.github.io" title=""></a> </li> <li class="network-entypo" > <a href="http://lmsuite.org" target="_blank" title="">Original LM Suite</a> </li> </ul> </div><!-- /.large-3.columns --> </div><!-- /.row --> </div><!-- /#footer --> <div id="subfooter"> <nav class="row"> <section id="subfooter-left" class="b30 small-12 medium-6 columns"> <ul class="inline-list"> <li>Created with &hearts; by <a style="display:inline;" href="http://phlow.de/">Phlow</a> with <a style="display:inline;" href="http://jekyllrb.com/" target="_blank">Jekyll</a> using <a style="display:inline;" href="http://phlow.github.io/feeling-responsive/">Feeling Responsive</a> </li> </ul> </section> <section id="subfooter-right" class="small-12 medium-6 columns social-icons"> <ul class="inline-list"> <li><a href="http://www.youtube.com/PhlowMedia" target="_blank" class="icon-youtube" title="Videos, Video-Anleitungen und Filme von Phlow auf YouTube"></a></li> <li><a href="http://twitter.com/phlow" target="_blank" class="icon-twitter" title="Immer das Neuste von Phlow gibt es auf Twitter"></a></li> <li><a href="http://www.facebook.com/phlow.media" target="_blank" class="icon-facebook" title="Lass uns Freunde sein!"></a></li> <li><a href="http://soundcloud.com/phlow" target="_blank" class="icon-soundcloud" title="Sounds und Downloads und mehr"></a></li> <li><a href="http://github.com/phlow" target="_blank" class="icon-github" title="Code und mehr..."></a></li> <li><a href="http://instagram.com/phlowmedia" target="_blank" class="icon-instagram" title="Bilder und Impressionen mit und ohne Filter..."></a></li> <li><a href="http://www.pinterest.com/phlowmedia/" target="_blank" class="icon-pinterest" title="Bilder, Fotos, Illustrationen, Grafiken sammeln..."></a></li> <li><a href="http://www.mixcloud.com/phlow/" target="_blank" class="icon-cloud" title="Mixe, was sonst?"></a></li> </ul> </section> </nav> </div><!-- /#subfooter --> </footer> <script src="https://lordcephei.github.io/assets/js/javascript.min.js"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-60112281-1', 'auto'); ga('set', 'anonymizeIp', true); ga('send', 'pageview'); </script> </body> </html>
