<!doctype html> <html class="no-js" lang="en"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <title>The plbnds program</title> <link rel="stylesheet" href="https://lordcephei.github.io/assets/css/styles_feeling_responsive.css"> <script src="https://lordcephei.github.io/assets/js/modernizr.min.js"></script> <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script> <script> WebFont.load({ google: { families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ] } }); </script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> <noscript> <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic|Volkhov' rel='stylesheet' type='text/css'> </noscript> <meta name="google-site-verification" content="KBbEPlf44q4dfL6SBHqymelMqXBSuZHSXIo-ZfkQLbE" /> <meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" /> <meta name="description" content="Questaal is a suite of programs for LMTO and GW simulations."/> <link rel="author" href="https://plus.google.com/u/0/104386739373934968982"/> <link rel="icon" sizes="32x32" href="https://lordcephei.github.io/assets/img/favicon-32x32.png"> <link rel="icon" sizes="192x192" href="https://lordcephei.github.io/assets/img/touch-icon-192x192.png"> <link rel="apple-touch-icon-precomposed" sizes="180x180" href="https://lordcephei.github.io/assets/img/apple-touch-icon-180x180-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://lordcephei.github.io/assets/img/apple-touch-icon-152x152-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://lordcephei.github.io/assets/img/apple-touch-icon-144x144-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://lordcephei.github.io/assets/img/apple-touch-icon-120x120-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://lordcephei.github.io/assets/img/apple-touch-icon-114x114-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://lordcephei.github.io/assets/img/apple-touch-icon-76x76-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://lordcephei.github.io/assets/img/apple-touch-icon-72x72-precomposed.png"> <link rel="apple-touch-icon-precomposed" href="https://lordcephei.github.io/assets/img/apple-touch-icon-precomposed.png"> <meta name="msapplication-TileImage" content="https://lordcephei.github.io/assets/img/msapplication_tileimage.png"/> <meta name="msapplication-TileColor" content="#fabb00"> <!-- Facebook Optimization --> <meta property="og:locale" content="en_EN" /> <meta property="og:type" content="website" /> <meta property="og:title" content="The plbnds program" /> <meta property="og:description" content="Questaal is a suite of programs for LMTO and GW simulations."/> <meta property="og:url" content="https://lordcephei.github.io//docs/misc/plbnds/" /> <meta property="og:site_name" content="Questaal" /> <!-- Search Engine Optimization --> <link type="text/plain" rel="author" href="https://lordcephei.github.io/humans.txt" /> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ extensions: ["tex2jax.js", "AMSmath.js"], jax: ["input/TeX", "output/HTML-CSS"], tex2jax: { inlineMath: [ ['$','$'] ], displayMath: [ ['$$','$$'] ], processEscapes: true }, }); </script> <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script> <style type="text/css"> red { color:purple; /*This changes the color of your text */ font-size:24pt; /*This changes the font size of your text */ } </style> </head> <body id="top-of-page" class="page-fullwidth"> <div id="navigation" class="sticky"> <nav class="top-bar" data-topbar> <ul class="title-area"> <li class="name"> <h1 class="hide-for-large-up"> <a href="https://lordcephei.github.io"> <img src="https://lordcephei.github.io/images/logo.png" style="width:125px;height:40px"></a></h1> </li> <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone --> <li class="toggle-topbar menu-icon"><a href="#"><span>Navigation</span></a></li> </ul> <section class="top-bar-section"> <ul class="left"> <li class ="show-for-large-up"><a href="https://lordcephei.github.io/"> <img src="https://lordcephei.github.io/images/logo.png" style="width:125px;height:40px"></a></li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://lordcephei.github.io">Functionality</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/functionality/application/">By Physical Application</a></li> <li><a href="https://lordcephei.github.io/functionality/program/">By Suite Program</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://lordcephei.github.io">Documentation</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/docs/package_overview/">Package Overview</a></li> <li><a href="https://lordcephei.github.io/docs/install/">Installation</a></li> <li class="has-dropdown"><a href="#">Description by code</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/docs/code/fpoverview/">Full Potential Overview</a></li> <li><a href="https://lordcephei.github.io/docs/code/gwoverview/">GW Overview</a></li> <li><a href="https://lordcephei.github.io/docs/code/dmftoverview/">Dynamical Mean Field Theory</a></li> <li><a href="https://lordcephei.github.io/docs/code/asaoverview/">ASA Overview</a></li> <li><a href="https://lordcephei.github.io/docs/code/lmgf/">ASA Green's function</a></li> <li><a href="https://lordcephei.github.io/docs/code/smhankels/">Smooth Hankel Functions</a></li> <li><a href="https://lordcephei.github.io/docs/code/jpos/">Jigsaw Puzzle Orbitals</a></li> <li><a href="https://lordcephei.github.io/docs/code/cpadoc/">CPA Enhancement of the Green's function package</a></li> <li><a href="https://lordcephei.github.io/docs/code/spectral-functions/">Spectral function calculations with lmgf</a></li> </ul></li> <li class="has-dropdown"><a href="#">Input Files</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/docs/input/inputfile/">The Input File</a></li> <li><a href="https://lordcephei.github.io/docs/input/preprocessor/">File Preprocessor</a></li> <li><a href="https://lordcephei.github.io/docs/input/sitefile/">The Site file</a></li> <li><a href="https://lordcephei.github.io/docs/input/symfile/">Symmetry Line Files</a></li> </ul></li> <li class="has-dropdown"><a href="#">Annotated Output Files</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/docs/outputs/lmf_output/">lmf standard output</a></li> </ul></li> <li class="has-dropdown"><a href="#">Command Line Options</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/docs/commandline/general/">General</a></li> <li><a href="https://lordcephei.github.io/docs/commandline/lmf/">lmf</a></li> <li><a href="https://lordcephei.github.io/docs/commandline/lm/">lm</a></li> </ul></li> <li class="has-dropdown"><a href="#">Physical Properties</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/docs/properties/optics/">Optics</a></li> </ul></li> <li class="has-dropdown"><a href="#">Auxilliary tools</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/docs/misc/plbnds/">The plbnds tool</a></li> <li><a href="https://lordcephei.github.io/docs/misc/pldos/">The pldos tool</a></li> <li><a href="https://lordcephei.github.io/docs/misc/fplot/">The fplot tool</a></li> <li><a href="https://lordcephei.github.io/docs/misc/mccalcdoc/">The mc calculator</a></li> <li><a href="https://lordcephei.github.io/docs/misc/pfitdoc/">The pfit tool</a></li> <li><a href="https://lordcephei.github.io/docs/misc/ccomp/">The ccomp processor</a></li> <li><a href="https://lordcephei.github.io/docs/misc/integerlists/">Integer list syntax</a></li> <li><a href="https://lordcephei.github.io/docs/misc/rotations/">Specifying rotations</a></li> </ul></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://lordcephei.github.io">Tutorials</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/tutorial/importing_input/">Importing Input files</a></li> <li class="has-dropdown"><a href="#">lmf</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/tutorial/lmf/lmf_tutorial/">Basic Tutorial for Full-Potential lmf</a></li> <li><a href="https://lordcephei.github.io/tutorial/lmf/lmf_pbte_tutorial/">Self-consistent density in PbTe</a></li> <li><a href="https://lordcephei.github.io/tutorial/lmf/lmf_bi2te3_tutorial/">Properties of the lmf basis set</a></li> <li><a href="https://lordcephei.github.io/tutorial/lmf/fpnew/">Elastic constant in Al</a></li> <li><a href="https://lordcephei.github.io/tutorial/lmf/fpoptbas/">lmf Basis Set Optimisation</a></li> <li><a href="https://lordcephei.github.io/tutorial/lmf/pdos/">Generating a Partial DOS</a></li> <li><a href="https://lordcephei.github.io/tutorial/lmf/mulliken/">Performing Mulliken Analysis</a></li> <li><a href="https://lordcephei.github.io/tutorial/lmf/fermisurface/">Generating a Fermi Surface</a></li> <li><a href="https://lordcephei.github.io/tutorial/lmf/cls/">Performing Core Level Spectroscopy</a></li> <li><a href="https://lordcephei.github.io/tutorial/lmf/lmf_bandedge/">Extremal points and calculating effective mass</a></li> </ul></li> <li class="has-dropdown"><a href="#">ASA</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/tutorial/asa/lm_pbte_tutorial/">LM Tutorial</a></li> </ul></li> <li class="has-dropdown"><a href="#">GW</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/tutorial/gw/poscar_qsgw/">POSCAR to QSGW</a></li> <li><a href="https://lordcephei.github.io/tutorial/gw/qsgw_si/">Basic QSGW Tutorial: Si</a></li> <li><a href="https://lordcephei.github.io/tutorial/gw/qsgw_fe/">QSGW Tutorial for Fe</a></li> <li><a href="https://lordcephei.github.io/tutorial/gw/gw_self_energy/">The GW Self-energy and Spectral Function</a></li> </ul></li> <li class="has-dropdown"><a href="#">lmgf</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/tutorial/lmgf/lmgf">LMGF Tutorial</a></li> </ul></li> <li class="has-dropdown"><a href="#">qsgw + dmft</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/tutorial/qsgw_dmft/dmft0/">Introduction</a></li> <li><a href="https://lordcephei.github.io/tutorial/qsgw_dmft/dmft1/">Setting up the DMFT loop</a></li> <li><a href="https://lordcephei.github.io/tutorial/qsgw_dmft/dmft2/">Running the DMFT loop</a></li> <li><a href="https://lordcephei.github.io/tutorial/qsgw_dmft/dmft3/">Issues with input and parameters</a></li> <li><a href="https://lordcephei.github.io/tutorial/qsgw_dmft/dmft4/">Charge + static-magnetic contributions</a></li> <li><a href="https://lordcephei.github.io/tutorial/qsgw_dmft/dmft5/">The density loop</a></li> <li><a href="https://lordcephei.github.io/tutorial/qsgw_dmft/maxent1/">The maximum entropy method</a></li> <li><a href="https://lordcephei.github.io/tutorial/qsgw_dmft/dmft7/">The self-energy loop and the dynamical double-counting</a></li> </ul></li> <li class="has-dropdown"><a href="#">tbe</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/tutorial/tbe/tbectrl">TBE Tutorial</a></li> </ul></li> <li class="has-dropdown"><a href="#">Physical Application</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/tutorial/application/optics/">Optics using lm and lmf</a></li> <li><a href="https://lordcephei.github.io/tutorial/application/fstut/">Making a Fermi surface</a></li> </ul></li> <li class="has-dropdown"><a href="#">Miscellaneous</a> <ul class="dropdown"> <li><a href="https://lordcephei.github.io/tutorial/misc/extbfield/">Adding external Zeeman field to the potential</a></li> </ul></li> </ul> </li> <li class="divider"></li> <li class=""><a href="https://lordcephei.github.io/formatting/">Site Contribution</a></li> <li class="divider"></li> <li class=""><a href="https://lordcephei.github.io/developers/">Developers</a></li> <li class="divider"></li> </ul> <ul class="right"> <li class="divider"></li> <li><a href="https://lordcephei.github.io/search/">Search</a></li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/contact/">Contact</a></li> <li class="divider"></li> <li><a href="https://lordcephei.github.io/about/">About</a></li> </ul> </section> </nav> </div><!-- /#navigation --> <div class="row t30"> <div class="medium-12 columns"> <article> <header> <h1>The plbnds program</h1> </header> <hr /> <h3 class="no_toc" id="purpose"><em>Purpose</em></h3> <p><strong style="color: blue">plbnds</strong> is designed to generate data to make figures of energy bands along specified symmetry lines.</p> <p>It can make postscript files directly, but this tool is is mostly used to set up render data files generated by Questaal codes into a <a href="/docs/misc/fplot/#structure-of-data-files">simple, easy-to-read format</a>. It also makes a script for the <a href="/docs/misc/fplot/"><strong style="color: blue">fplot</strong></a> graphics tool, but the simple data format is suitable for use by any graphics package.</p> <hr /> <h3 class="no_toc" id="preliminaries"><em>Preliminaries</em></h3> <p>Executables <strong style="color: blue">plbnds</strong> and <strong style="color: blue">fplot</strong> are required and are assumed to be in your path. You will also need a postscript viewer. This document assumes you are using the generic apple-style <strong style="color: blue">open</strong> command to view postscript files.</p> <hr /> <h3 class="no_toc" id="table-of-contents"><em>Table of Contents</em></h3> <ul id="markdown-toc"> <li><a href="#introduction" id="markdown-toc-introduction">1. <em>Introduction</em></a></li> <li><a href="#examples" id="markdown-toc-examples">2. <em>Examples</em></a> <ul> <li><a href="#example-1" id="markdown-toc-example-1">Example 1</a></li> <li><a href="#example-2" id="markdown-toc-example-2">Example 2</a></li> <li><a href="#example-3" id="markdown-toc-example-3">Example 3</a></li> </ul> </li> <li><a href="#plbnds-manual" id="markdown-toc-plbnds-manual">3. <em>plbnds manual</em></a></li> <li><a href="#other-resources" id="markdown-toc-other-resources">4. <em>Other resources</em></a></li> </ul> <h3 id="introduction">1. <em>Introduction</em></h3> <p>Energy bands provide a great deal of information, and the Questaal codes provide a fair amount of flexibility in generating them. Drawing bands with color weights is a particularly useful feature, as shown in Section 2</p> <p>You must choose the symmetry lines yourself, but <a href="https://lordcephei.github.io/docs/input/symfile/">prepackaged symmetry line files</a> are available that greatly facilitate the selection and labelling.</p> <p>Three Questaal tools can make energy bands along symmetry lines you specify: <strong style="color: blue">lmf</strong>, <strong style="color: blue">lm</strong>, and <strong style="color: blue">tbe</strong>. They share a common input and output format. Bands are written to file <em style="color: green">bnds.ext</em>. This file is not written in a friendly format; but it is often the case that you need only a subset of the bands or to provide extra information such as data for color weights. <strong style="color: blue">plbnds</strong> can efficiently convert data in <em style="color: green">bnds.ext</em> to a friendly format in a variety of circumstances. Data for each symmetry line is kept in a separate file.</p> <p><strong style="color: blue">plbnds</strong> may be used in one of several contexts:</p> <ol> <li>To make postscript files of bands directly, without other software. Quick and dirty: no easy way to modify the figure.</li> <li>To generate a script and formated files for use with <strong style="color: blue">fplot</strong>, a plotting package built into Questaal.</li> <li>Same as 2, but format files ready for use with <strong style="color: blue">gnuplot</strong>, <strong style="color: blue">xmgrace</strong>, or another graphics package.</li> </ol> <p>Tutorials show how to draw figures with <strong style="color: blue">fplot</strong>; however <strong style="color: blue">plbnds</strong> makes suitable files you can easily use with <strong style="color: blue">gnuplot</strong> or some other package. <strong style="color: blue">plbnds</strong> and <strong style="color: blue">fplot</strong> write postscript files to <em style="color: green">fplot.ps</em>.</p> <p><strong style="color: blue">plbnds</strong> will print information about its usage by typing</p><pre><code>$ plbnds --h
</code></pre><p>Section 2 gives you an intuitive feel of how <strong style="color: blue">plbnds</strong> operates by working through an example (the energy bands of Co).</p> <p>Section 3 is an operations manual.</p> <hr /> <h3 id="examples">2. <em>Examples</em></h3> <p>Copy an already prepared bands file for Co, <a href="/assets/download/inputfiles/bnds.co"><em style="color: green">bnds.co</em></a> to your working directory. It contains energy bands connecting the symmetry lines M, Γ, A, L, Γ, K (5 panels). Bands were computed in the LDA with spin-orbit coupling; thus both spin-up and spin-down bands are present.</p> <p>The first line of the file</p><pre><code>36  -0.02136     2  col= 5:9,14:18  col2= 23:27,32:36
</code></pre><p>contains essential information about the contents. It says that:</p> <ul> <li>the file contains 36 bands</li> <li>the Fermi level is -0.02136 Ry</li> <li>the file contains two sets of color weights</li> </ul> <p>Strings <strong>col=</strong> and following are not used; they are there for record-keeping.</p> <h5 id="example-1">Example 1</h5> <p>Enter the following to make and view the postscript file:</p><pre><code>$ echo -0.8,0.6,10,15 | plbnds -lbl=M,G,A,L,G,K bnds.co
$ open fplot.ps
</code></pre><p>Note the following:</p> <ul> <li>The energy bands are plotted in an energy window <code>-0.8,0.6</code> Ry, in 5 panels.</li> <li>Arguments <code>10,15</code> specify the width and height of the entire figure (in cm, approximately).</li> <li>The symmetry labels M, Γ, A, L, Γ, K, were extracted from <code>-lbl=M,G,A,L,G,K</code>. (G is turned into Γ.)</li> <li>Energy bands are in Ry.</li> <li>The Fermi level is drawn as a dashed line at -0.02136 Ry.</li> <li>Bands are plotted as fat dots at the points where they are generated.</li> <li>It is easy to distinguish the dense tangle of flat <em>d</em> bands approximately between -0.3 and +0.1 Ry.<br /> The <em>sp</em> bands are highly dispersive and approximately quadratic; see <a href="/docs/misc/plbnds/#example-3">Example 3</a> for more details.</li> </ul> <h5 id="example-2">Example 2</h5> <p>For a better and more modifiable figure, run <strong style="color: blue">plbnds</strong> again with:</p><pre><code>$ echo -10,8 / | plbnds -fplot -ef=0 -scl=13.6 -nocol -lbl=M,G,A,L,G,K bnds.co
</code></pre><div onclick="elm = document.getElementById('stdout'); if(elm.style.display == 'none') elm.style.display = 'block'; else elm.style.display = 'none';"> <button type="button" class="button tiny radius">Click to show stdout from plbnds.</button> </div> <p><div style="display:none;padding:0px;" id="stdout"></p><pre><code> plbnds : bands file contains two sets of color weights
 plbnds: 36 bands  fermi=-0.02136  scaled by 13.6  shifted to 0
 panel 1  nq=25  ebot=-9.232224  etop=33.866176  delta q=0.577353
 panel 2  nq=21  ebot=-9.232224  etop=33.235136  delta q=0.30619
 panel 3  nq=41  ebot=-7.005904  etop=29.214976  delta q=0.57735
 panel 4  nq=45  ebot=-9.232224  etop=33.503056  delta q=0.653518
 panel 5  nq=41  ebot=-9.232224  etop=33.603696  delta q=0.666665
 nq=173  npan=5  emin=-9.232224  ef=0  emax=33.866176  sum dq=2.781075
 emin, emax, width(cm), height(cm) ?
 write file bnd1.dat, bands 1 - 26
 write file bnd2.dat, bands 1 - 26
 write file bnd3.dat, bands 1 - 26
 write file bnd4.dat, bands 1 - 26
 write file bnd5.dat, bands 1 - 26
  ... to plot, invoke:
  fplot -disp -f plot.plbnds
</code></pre><p></div></p> <p>The new switches indicate the following:</p> <ul> <li><code>-fplot</code> tells <strong style="color: blue">plbnds</strong> to generate data files for each of the five panels, and also a script for the <a href="/docs/misc/fplot">fplot</a> tool.<br /> The fplot script is written to a file, <em style="color: green">plot.plbnds</em>.<br /> The five panels are written to files (<em>bnd</em>[1-5]<em style="color: green">.dat</em>) (see standard output). They take a standard Questaal format, which is easily read by other packages.<br /> The first column is a fractional distance along the symmetry line (0 for starting point, 1 for ending point).<br /> The remaining 26 columns comprise energy bands in the window (-10,8) eV.</li> <li><code>-ef=0</code> tells <strong style="color: blue">plbnds</strong> to shift the bands by a constant so the Fermi energy falls at 0.<br /> <em style="color: red">Note:</em> in an infinite periodic system the energy zero is ill defined; it can be chosen arbitrarily.</li> <li><code>-scl=13.6</code> scales the energy bands by this factor, converting the raw bands (in Ry) to eV.</li> <li><code>-nocol</code> tells <strong style="color: blue">plbnds</strong> to ignore information about color weights.</li> </ul> <p>The energy window is now <code>-10,8</code> eV. The last two arguments from <strong>stdin</strong> (formerly <code>10,15</code>) are not used in this mode since <strong style="color: blue">plbnds</strong> makes no figure.</p> <p>Make and view a postscript file with</p><pre><code>$ fplot -f plot.plbnds
$ open fplot.ps 
</code></pre><p>This figure is much closer to publication quality. You can of course customize the figure by editing <em style="color: green">plot.plbnds</em>. To interpret and customize the script, see the <a href="/docs/misc/fplot">fplot manual</a>.</p> <h5 id="example-3">Example 3</h5> <p>This example illustrates a very useful feature of the Questaal band plotting capabilities. It uses two color weights to distinguish spin-up and spin-down bands. The first color selects out the majority bands of <em>d</em> character, the second the minority <em>d</em> bands.</p> <p>Consider orbital component <em>i</em> of band <em>n</em>. Its wave function has eigenvector element <i>z<sub>in</sub></i>. The wave function is normalized, and so</p> <script type="math/tex; mode=display">\sum_i z^{-1}_{ni} z_{in} = 1</script> <p>The sum runs over all of the orbitals in the basis. By “decomposing the norm” of <em>z</em>, that is summing over a subset of orbitals <em>i</em>, the result is less than unity and is a measure of the contribution of that subset to the unit norm. <em style="color: red">Note:</em> this decomposition is essentially like a Mulliken analysis.</p> <p><em style="color: green">bnds.co</em> was generated with two color weights: all <em>d</em> orbitals in the Co majority spin channel were combined for the first weight, and the corresponding <em>d</em> orbitals in the Co minority channel the second. Thus, the first color weight is zero if there is no projection of the eigenfunction onto majority <em>d</em> channel, and 1 if the entire eigenfunction is of majority <em>d</em> character. The same applies for the second weight, but for the minority <em>d</em> channel.</p> <p><em style="color: red">Note:</em> <em style="color: green">bnds.co</em> was generated from one of the validation scripts in the Questaal source directory.</p> <div onclick="elm = document.getElementById('cotest'); if(elm.style.display == 'none') elm.style.display = 'block'; else elm.style.display = 'none';"> <button type="button" class="button tiny radius">Click to see how to run and interpret the script.</button> </div> <p><div style="display:none;padding:0px;" id="cotest"></p> <p>Assuming your source directory is <strong>~/lm</strong>, you can create the bands yourself running this script:</p><pre><code>$ ~/lm/fp/test/test.fp co 1
</code></pre><p>The script runs <strong style="color: blue">lmf</strong> as:</p><pre><code>lmf  co -vmet=4 -vlmf=1 -vnk=8 -vnit=10 --pr31,20 --no-iactiv -vso=t --band~col=5:9,dup=9~col2=18+5:18+9,dup=9~fn=syml
</code></pre><p><code>-vmet=4 -vlmf=1 -vnk=8 -vnit=10</code> <a href="/docs/input/preprocessor/#variables">assign algebraic variables</a> which will modify <em style="color: green">ctrl.co</em> when run through the <a href="/docs/input/preprocessor">preprocessor</a>. They are of secondary interest here. <code>-vso=t</code> does the same, but is important in this context because the input file contains the following:</p><pre><code>HAM   ...  SO={so} 
</code></pre><p><code>-vso=t</code> sets variable <strong>so</strong> to <strong>true</strong> (or <strong>1</strong>). The proprocessor <a href="/docs/input/preprocessor/#curly-brackets-contain-expressions">transforms</a> <code>SO={so}</code> into <code>SO=1</code>. Token <strong>SO</strong> <a href="/docs/input/inputfile/#ham">controls spin orbit coupling</a>.</p> <p><code>--band~col=5:9,dup=9~col2=18+5:18+9,dup=9~fn=syml</code> tells <strong style="color: blue">lmf</strong> to draw energy bands with two color weights (<code>col=..</code> and <code>col2=..</code>) Orbitals <strong>5-9</strong> comprise the majority spin <em>d</em> orbitals of the first Hankel energy;, <strong>14-8</strong> those of the second.<br /> <em style="color: red">Note:</em> <code>dup=9</code> replicates the existing list, adding 9 to each element in the list.)</p> <p>States <strong>23-27</strong> are the corresponding <em>d</em> orbital in the minority channel. The five <em>d</em> states are expressed conveniently as <strong>18+5:18+9</strong>. These are the minority spin counterparts since the entire hamiltonian basis consists of 18 orbitals. When the hamiltonian is treated relativistically, the hamiltonian is doubled into a 2×2 supermatrix; with spin 1 orbitals occuring first.</p> <p></div></p> <p>Run <strong style="color: blue">plbnds</strong> as before, except eliminating <code>-nocol</code> and adding a line type:</p><pre><code>$ echo -10,8 / | plbnds -fplot -ef=0 -scl=13.6 -lt=1,bold=3,col=0,0,0,colw=.7,0,0,colw2=0,.7,0 -lbl=M,G,A,L,G,K bnds.co
$ fplot -f plot.plbnds
$ open fplot.ps 
</code></pre><p>The line type specifes a solid line (<code>-lt=1</code>), the line thickness (<code>bold=3</code>); the default line color (<code>col=0,0,0</code>) which is the color when the first and second weights vanish; colors of the first weight (<code>colw=.7,0,0</code>) and second weight <code>colw2=0,.7,0</code>), respectively. The three numbers correspond to fractions of (red, green, blue). Thus, if a band has no <em>d</em> character it will be black; it will be red with 100% majority <em>d</em> character and green with 100% minority <em>d</em> character.</p> <p>Colors provide an extremely helpful guide to interpret the bands. It shows clearly which bands have majority and minority <em>d</em> character.</p> <div onclick="elm = document.getElementById('cocolorbands'); if(elm.style.display == 'none') elm.style.display = 'block'; else elm.style.display = 'none';"> <button type="button" class="button tiny radius">Click to view and interpret the figure</button> </div> <p><div style="display:none;padding:0px;" id="cocolorbands"></p> <p>Your postscript file should look like the figure below.</p> <p><img src="/assets/img/bnds-co.svg" alt="Energy bands for Co" /></p> <p>Note the following points:</p> <ul> <li>The highly dispersive band between Γ and A in the window (-2,0) eV, is black, indicating its <em>sp</em> character. The band continues on Γ-M line to positive energy. You can also see traces of it on the Γ-K line, starting at Γ near -0.5 eV, The bottom of the band starts occurs around -9 eV at Γ.</li> <li>The majority and minority <em>d</em> bands are quite distinct. This means that <i>s<sub>z</sub></i> is almost a good quantum number. In the absence of spin-orbit coupling it <em>is</em> a good quantum number. If spin-orbit coupling significantly admixes ↑ and ↓ character, red and green would bleed together, which would appear as yellow.</li> <li>The majority and minority <em>d</em> bands are approximately the same shape, but split by about 1.6 eV. It is known that the spin part of potential is similar for all the <em>d</em> orbitals. The bands are spin split by an approximately constant value of <i>I</i>×<i>M</i>, where <i>I</i> and <i>M</i> are respectively the Stoner parameter and the magnetic moment. In 3_d_ transition metals Cr, Mn, Fe, Co and Ni, <i>I</i> is close to 1 eV. Also for Co, <i>M</i>=1.6 <i>μ</i><sub>B</sub>.</li> </ul> <p></div></p> <h3 id="plbnds-manual">3. <em>plbnds manual</em></h3> <p>Invoke <strong style="color: blue">plbnds</strong> in one of the following ways:</p><pre>
plbnds [-switches] <i>filename</i>
echo <i>emin</i>, <i>emax</i>, <i>w</i>, <i>h</i> | plbnds [-switches] <i>filename</i>
</pre><p><em style="color: green">filename</em> is the file name (<em style="color: green">bnds.co</em> in this case). You can also use just the extension (<em style="color: green">co</em>).</p> <p><strong style="color: blue">plbnds</strong> reads four numbers from <strong>stdin</strong>:<br /> <code>emin, emax, width(cm), height(cm)</code></p> <p><code>emin</code> and <code>emax</code> comprise the lower and upper bounds of figure. Data is written only for bands that fall in this range. The third and fourth arguments determine the size of the figure; they are used only when <strong style="color: blue">plbnds</strong> makes a postscript file directly (<a href="/docs/misc/plbnds/#example-1">Example 1</a>).</p> <p>Optional switches perform the following functions:</p> <ul> <li>-help | --help | --h <br /> prints out a help message and exits.</li> <li>-lbl=<em>a</em>,<em>b</em>,<em>c</em>,<em>d</em>,…<br /> <em>a</em>,<em>b</em>,<em>c</em>,<em>d</em>,… are <em>k</em> point (symmetry) labels at the points where panels meet. (See <a href="/docs/misc/plbnds/#example-1">Example 1</a>)<br /> For now, labels must be one character each. You should supply <em>n</em>+1 labels, where <em>n</em> is the number of panels.<br /> <em style="color: red">Note:</em> G is turned into the Greek character Γ.</li> <li>-ef=<i>expr</i><br /> shifts the energy bands so that the Fermi energy lies at <i>expr</i>. (See <a href="/docs/misc/plbnds/#example-2">Example 2</a>)</li> <li>-scl=<i>expr</i><br /> scales bands by <i>expr</i>. (See <a href="/docs/misc/plbnds/#example-2">Example 2</a>)</li> <li>-wscl=<i>w</i>[,<i>h</i>]<br /> scales the default figure size by <em>w</em>. <em>w</em> is a number or expression.<br /> If the second argument is present the width is scaled by <em>w</em>, the height by <em>h</em>.</li> <li>-tl=<i>title</i><br /> Adds a title to appear at the top of the figure.</li> <li>-spin1 | -spin2<br /> plots bands of first or second spin (<em style="color: green">bnds.ext</em> must contain data for two spins).</li> <li> <p>-skip=<em>lst</em><br /> skip panels in list, e.g. <code>-skip=1,3</code> . <a href="/docs/misc/integerlists">This page</a> documents integer list syntax.</p> </li> <li>-col3:<i>bnds2</i>,<i>fnout</i><br /> merges the color weights in <em style="color: green">bnds.ext</em> and <em style="color: green">bnds2</em> into file <em style="color: green">fnout</em> (<em style="color: green">fnout</em> and <em style="color: green">bnds2</em> refer to the full file name).<br /> The Questaal codes are equipped to generate energy bands with only one or two color weights; however <strong style="color: blue">plbnds</strong> and <strong style="color: blue">fplot</strong> has the capability to manage up to three color weights. <code>-col3</code> enables you to merge back-to-back band calculations with respectively two and one color weights, into a single <em style="color: green">bnds</em> file, suitable for processsing by <strong style="color: blue">plbnds</strong> and <strong style="color: blue">fplot</strong>. <ul> <li><em style="color: green">bnds.ext</em> should contain two color weights, <em style="color: green">bnds2</em> one color weight.</li> <li><em style="color: green">bnds.ext</em> and <em style="color: green">bnds2</em> must contain identical bands generated at the same <em>k</em> points.</li> </ul> </li> </ul> <p><i> </i></p> <ul> <li>-fplot[:s] causes <strong style="color: blue">plbnds</strong> to create input for <strong style="color: blue">fplot</strong> or another graphics package. (See <a href="/docs/misc/plbnds/#example-2">Example 2</a>.)<br /> This switch causes <strong style="color: blue">plbnds</strong> to do the following: <ol> <li>write energy bands to files <em style="color: green">bnd1.dat</em>, <em style="color: green">bnd2.dat</em>, … (one file for every panel).</li> <li>generate a script <em style="color: green">plot.plbnds</em>.</li> <li>suppress directly creating a postscript file</li> <li><code>-fplot:s</code> tells <strong style="color: blue">plbnds</strong> that <em style="color: green">bnds.ext</em> has two spins. It will generate bands for both spins. (To draw spin1 or spin2 bands only, use <code>-spin1</code> or <code>-spin2</code>).</li> </ol> <p>You can create and view a postscript figure of the bands with</p><pre><code>$ fplot -f plot.plbnds
$ open fplot.ps
</code></pre><p>To customize the figure, edit <em style="color: green">plot.plbnds</em>. Refer to the <a href="/docs/misc/fplot">fplot manual</a> to learn about the capabilities and switches in the <strong style="color: blue">fplot</strong> tool.</p> <p>Alternatively, use <em style="color: green">bnd1.dat</em>, <em style="color: green">bnd2.dat</em>, … to generate energy bands with your favorite graphics tool. <em style="color: green">bnd1.dat</em>, <em style="color: green">bnd2.dat</em>, … are in standard Questaal form, and easily readable format.</p> </li> <li> <p>-dat=<i>ext</i> (may be used in conjunction with <code>-fplot</code>)<br /> Substitute <em>.ext</em> for .dat when writing data files. This is useful when merging two or more sets of bands into one figure.</p> </li> <li> <p>-nocol or –nocol (may be used in conjunction with <code>-fplot</code>)<br /> Ignore information about color weights.</p> </li> <li>-merge=file2[,file3] or -mergep=file2[,file3]<br /> merges two bands file (one for each spin in the spin-pol case).<br /> Optional <strong>file3</strong> causes <strong style="color: blue">plbnds</strong> to write the merged file to <em style="color: green">file3</em>.<br /> <code>-mergep</code> pads a file containing fewer bands so that the number of bands in the merged file is fixed.</li> </ul> <hr /> <h3 id="other-resources">4. <em>Other resources</em></h3> <p>See the <a href="/docs/misc/fplot/">fplot</a> and <a href="/docs/misc/pldos/">pldos</a> manuals.</p> </article> </div><!-- /.medium-12.columns --> </div><!-- /.row --> <div id="up-to-top" class="row"> <div class="small-12 columns" style="text-align: right;"> <a class="iconfont" href="#top-of-page">&#xf108;</a> </div><!-- /.small-12.columns --> </div><!-- /.row --> <footer id="footer-content" class="bg-grau"> <div id="footer"> <div class="row"> <div class="medium-6 large-5 columns"> <h5 class="shadow-black">About This Site</h5> <p class="shadow-black"> Questaal is a suite of programs for LMTO and GW simulations. <a href="https://lordcephei.github.io/info/">More ›</a> </p> </div><!-- /.large-6.columns --> <div class="small-6 medium-3 large-3 large-offset-1 columns"> <h5 class="shadow-black">Services</h5> <ul class="no-bullet shadow-black"> <li > <a href="https://lordcephei.github.io" title=""></a> </li> <li class="services-contact" > <a href="https://lordcephei.github.io/contact/" title="Contact">Contact</a> </li> <li class="list" > <a href="https://lordcephei.github.io/developers/" title="Contact the developers">Developers</a> </li> </ul> </div><!-- /.large-4.columns --> <div class="small-6 medium-3 large-3 columns"> <h5 class="shadow-black">Related websites</h5> <ul class="no-bullet shadow-black"> <li > <a href="https://lordcephei.github.io" title=""></a> </li> <li class="network-entypo" > <a href="http://lmsuite.org" target="_blank" title="">Original LM Suite</a> </li> </ul> </div><!-- /.large-3.columns --> </div><!-- /.row --> </div><!-- /#footer --> </footer> <script src="https://lordcephei.github.io/assets/js/javascript.min.js"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-60112281-1', 'auto'); ga('set', 'anonymizeIp', true); ga('send', 'pageview'); </script> </body> </html>
